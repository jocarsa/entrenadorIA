<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrenador de Chatbot GPT‑2</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <h1>Entrenador de Chatbot GPT‑2</h1>
    </header>

    <div class="tab-container">
        <div class="tabs">
            <button class="tab-btn active" data-tab="dataset">Dataset</button>
            <button class="tab-btn"        data-tab="training">Entrenamiento</button>
            <button class="tab-btn"        data-tab="testing">Pruebas</button>
        </div>

        <!-- ------------ DATASET TAB ------------------------------------ -->
        <div class="tab-content active" id="dataset">
            <div class="section-header">
                <h2>Gestión del dataset</h2>
                <button id="addConversationBtn" class="primary-btn">
                    <i class="fas fa-plus"></i> Agregar conversación
                </button>
            </div>

            <div class="conversations-list">
                <div class="loading">Cargando conversaciones…</div>
            </div>

            <!-- Modal – formulario de conversación -->
            <div id="conversationModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Agregar nueva conversación</h3>
                        <span class="close-modal">&times;</span>
                    </div>
                    <div class="modal-body">
                        <form id="conversationForm">
                            <input type="hidden" id="conversationId" value="">

                            <div id="conversationTurns"></div>

                            <div class="form-controls">
                                <button type="button" id="addTurnBtn" class="secondary-btn">
                                    <i class="fas fa-plus"></i> Añadir turno
                                </button>
                                <div class="submit-group">
                                    <button type="submit" class="primary-btn">Guardar conversación</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Modal de confirmación -->
            <div id="confirmModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Confirmar borrado</h3>
                        <span class="close-modal">&times;</span>
                    </div>
                    <div class="modal-body">
                        <p>¿Seguro que deseas borrar esta conversación?</p>
                        <div class="form-controls">
                            <button id="confirmDeleteBtn" class="danger-btn">Borrar</button>
                            <button id="cancelDeleteBtn"  class="secondary-btn">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ------------ TRAINING TAB ----------------------------------- -->
        <div class="tab-content" id="training">
            <div class="section-header">
                <h2>Entrenamiento del modelo</h2>
            </div>

            <div class="training-container">
                <div class="card">
                    <div class="card-header">
                        <h3>Estado de entrenamiento</h3>
                    </div>
                    <div class="card-body">
                        <div class="status-info">
                            <p id="trainingStatus">No iniciado</p>
                            <div class="progress-bar-container">
                                <div id="trainingProgress" class="progress-bar"></div>
                                <span id="progressPercentage">0 %</span>
                            </div>
                        </div>

                        <div class="training-controls">
                            <button id="startTrainingBtn" class="primary-btn">Iniciar entrenamiento</button>
                        </div>

                        <div class="training-logs">
                            <h4>Registros de entrenamiento</h4>
                            <div id="logsContainer" class="logs-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ------------ TESTING TAB ------------------------------------ -->
        <div class="tab-content" id="testing">
            <div class="section-header">
                <h2>Prueba tu chatbot</h2>
            </div>

            <div class="chat-container">
                <div class="chat-box" id="chatBox">
                    <div class="welcome-message">
                        <h3>¡Bienvenido/a a tu chatbot GPT‑2!</h3>
                        <p>Envía un mensaje para empezar a chatear.</p>
                    </div>
                    <!-- Los mensajes del chat aparecerán aquí -->
                </div>

                <div class="chat-input">
                    <form id="chatForm">
                        <input type="text" id="userInput" placeholder="Escribe tu mensaje…" autocomplete="off">
                        <button type="submit" class="primary-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Entrenador de Chatbot GPT‑2</p>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

